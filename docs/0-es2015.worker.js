!function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,(function(t){return e[t]}).bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="ZeQ1")}({ZeQ1:function(e,t,r){"use strict";r.r(t);var i,n=function(e){return e[e.VeryEasy=1]="VeryEasy",e[e.Easy=2]="Easy",e[e.Medium=3]="Medium",e[e.Hard=4]="Hard",e[e.VeryHard=5]="VeryHard",e}({}),o=function(e){return e[e.White=0]="White",e[e.Black=1]="Black",e}({});!function(e){let t;!function(e){e.VeryEasy="Very easy",e.Easy="Easy",e.Medium="Medium",e.Hard="Hard",e.VeryHard="Very hard"}(t=e.Names||(e.Names={}));const r=[{name:t.VeryEasy,config:{name:t.VeryEasy,difficulty:n.VeryEasy,maxSearchDepth:2,heuristic:(e,t)=>{let r=0;for(let i of e.data)null!==i&&(r+=(i.color===t?1:-1)*(i.king?2:1));return r},clearThought:.5}},{name:t.Easy,config:{name:t.Easy,difficulty:n.Easy,maxSearchDepth:2,heuristic:(e,t)=>{let r=0;for(let i of e.data)null!==i&&(r+=(i.color===t?1:-1)*(i.king?2:1));return r},clearThought:.8}},{name:t.Medium,config:{name:t.Medium,difficulty:n.Medium,maxSearchDepth:4,heuristic:(e,t)=>{let r=0;for(let i of e.data)null!==i&&(r+=(i.color===t?1:-1)*(i.king?2:1));return r},clearThought:.8}},{name:t.Hard,config:{name:t.Hard,difficulty:n.Hard,maxSearchDepth:6,heuristic:(e,t)=>{let r=0;for(let i of e.data)null!==i&&(r+=(i.color===t?1:-1)*(i.king?2:1));return r},clearThought:1}},{name:t.VeryHard,config:{name:t.VeryHard,difficulty:n.VeryHard,maxSearchDepth:10,heuristic:(e,t)=>{let r=0;for(let i of e.data)null!==i&&(r+=(i.color===t?1:-1)*(i.king?2:1));return r},clearThought:1}}];e.getByName=function(e){return r.find(t=>t.name===e).config}}(i||(i={}));let l=(()=>{class e{constructor(){this._grid=new Array(64),this._grid.fill(null),this._uuid=e.nextUUID++}static fromJson(t){let r=new e;return r._grid=t,r}toJson(){return this._grid}get uuid(){return this._uuid}get data(){return this._grid}computePossibleMoves(t){let r=t===o.White?1:-1,i=t===o.White?o.Black:o.White,n=(t,r,o,l)=>{let a=[];for(let e of o)a.push({x:t.x-2,y:t.y+2*e}),a.push({x:t.x+2,y:t.y+2*e});let s=!0;for(let u of a){if(r.steps.find(e=>e.x===u.x&&e.y===u.y))continue;let a=e.between(t,u),c=this.get(a);e.isValidPosition(u)&&e.isValidPosition(a)&&null!==c&&c.color===i&&null===this.get(u)&&(n(u,{piece:r.piece,steps:[...r.steps,u],removePieces:[...r.removePieces,c]},o,l),s=!1)}s&&r.steps.length>0&&l.push(r)},l=this._grid.filter(e=>null!==e&&e.color===t),a=[];for(let e of l){let t=this.getPiecePosition(e);n(t,{piece:e,steps:[],removePieces:[]},e.king?[r,-r]:[r],a)}if(0===a.length)for(let o of l){let t=this.getPiecePosition(o),i=[{x:t.x-1,y:t.y+r},{x:t.x+1,y:t.y+r}];o.king&&(i=[...i,{x:t.x-1,y:t.y-r},{x:t.x+1,y:t.y-r}]);for(let r of i)e.isValidPosition(r)&&null===this.get(r)&&a.push({piece:o,steps:[r],removePieces:[]})}return a}set(e,t){this._grid[this.parsePos(e)]=t}get(t){return e.isValidPosition(t)?this._grid[this.parsePos(t)]:null}parsePos(e){return 8*e.y+e.x}apply(e){let t=e.steps[e.steps.length-1],r=this.getPieceByIndex(e.piece.index);this.set(this.getPiecePosition(e.piece),null),this.set(t,r);for(let i of e.removePieces){let e=this.getPiecePosition(i);this.set(e,null)}return r.king||(e.piece.color===o.White?7:0)!==t.y||this.set(t,{index:r.index,color:r.color,king:!0}),this}copy(){let t=new e;return t._grid=this._grid.map(e=>null!==e?{king:e.king,color:e.color,index:e.index}:null),t}getPieceByIndex(e){for(let t of this._grid)if(null!==t&&t.index===e)return t;return console.error(`Piece not found(${e})`),null}getPiecePosition(e){return this.getPiecePositionByIndex(e.index)}getPiecePositionByIndex(e){for(let t=0;t<8;t++)for(let r=0;r<8;r++){let i=this.get({x:t,y:r});if(i&&i.index===e)return{x:t,y:r}}return console.error(`Piece not found(${e})`),null}static create(){let t=new e,r=0;for(let e=0;e<12;e++){let i=1===Math.floor(e/4);t._grid[2*e+(i?1:0)]={index:r,color:o.White,king:!1},t._grid[63-2*e+(i?-1:0)]={index:r+12,color:o.Black,king:!1},r++}return t}static isValidPosition(e){return e.x>=0&&e.x<8&&e.y>=0&&e.y<8}static between(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}}return e.nextUUID=0,e})();class a{constructor(e,t,r,i=null){this.grid=e,this.turn=t,this.depth=r,this.move=i}children(){if(0===this.depth)return[];let e=this.turn===o.White?o.Black:o.White;return this.grid.computePossibleMoves(this.turn).map(t=>{let r=this.grid.copy().apply(t);return new a(r,e,this.depth-1,t)})}}class s{constructor(){}eval(e,t,r){let n=i.getByName(r),o=new a(e,t,n.maxSearchDepth);return this.alphaBeta(o,t,n).move}alphaBeta(e,t,r,i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY){let o,l,a=e.children(),s=1+(1-r.clearThought)*(2*Math.random()-1);if(0===e.depth||0===a.length)return{value:r.heuristic(e.grid,t)*s,move:e.move};if(e.turn===t){o=Number.NEGATIVE_INFINITY;for(let e of a){let a=this.alphaBeta(e,t,r,i,n);if(a.value>o&&(o=a.value,l=e.move),(i=Math.max(i,o))>=n)break}}else{o=Number.POSITIVE_INFINITY;for(let e of a){let a=this.alphaBeta(e,t,r,i,n);if(a.value<o&&(o=a.value,l=e.move),i>=(n=Math.min(n,o)))break}}return{value:o,move:l}}minMax(e,t,r){let i,n,o=e.children(),l=1+(1-r.clearThought)*(2*Math.random()-1);if(0===e.depth||0===o.length)return{value:r.heuristic(e.grid,t)*l,move:e.move};if(e.turn===t){i=Number.NEGATIVE_INFINITY;for(let e of o){let o=this.minMax(e,t,r);o.value>i&&(i=o.value,n=e.move)}}else{i=Number.POSITIVE_INFINITY;for(let e of o){let o=this.minMax(e,t,r);o.value<i&&(i=o.value,n=e.move)}}return{value:i,move:n}}}let u=self.postMessage;self.onmessage=function(e){let t=new s,r=e.data,i=t.eval(l.fromJson(r.gridData),r.player,r.aiName);u(i)}}});